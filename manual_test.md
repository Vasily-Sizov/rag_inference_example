# üöÄ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã RAG

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É:**

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up --build

# 2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (30-60 —Å–µ–∫—É–Ω–¥)

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
python test_pipeline.py
```

–ì–æ—Ç–æ–≤–æ! –ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## 1. –ó–∞–ø—É—Å–∫ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
docker compose up --build
```

–î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
docker compose ps
```

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `Up`:

- ‚úÖ artemis (–ø–æ—Ä—Ç 8161, 61616)
- ‚úÖ redis (–ø–æ—Ä—Ç 6379)
- ‚úÖ translator_service (–ø–æ—Ä—Ç 8005)
- ‚úÖ artemis_chat_email
- ‚úÖ rag_stub
- ‚úÖ opensearch (–ø–æ—Ä—Ç 9200)
- ‚úÖ file_service (–ø–æ—Ä—Ç 9001)
- ‚úÖ indexer_stub (–ø–æ—Ä—Ç 8001)
- ‚úÖ artemis_indexer

---

## üß™ 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö pipeline

### 2.1. –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö pipeline

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
python test_pipeline.py
```

–ò–ª–∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ pipeline:

```bash
python test_pipeline.py chat    # –¢–æ–ª—å–∫–æ chat pipeline
python test_pipeline.py email   # –¢–æ–ª—å–∫–æ email pipeline
python test_pipeline.py index   # –¢–æ–ª—å–∫–æ index pipeline
python test_pipeline.py all     # –í—Å–µ pipeline (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### 2.2. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**
2. **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç INDEX pipeline:**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –≤ OpenSearch
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç CHAT pipeline:**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –≤–µ–∫—Ç–æ—Ä –≤ translator_service
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —á–µ—Ä–µ–∑ rag_stub
4. **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç EMAIL pipeline:**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –≤–µ–∫—Ç–æ—Ä –≤ translator_service
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —á–µ—Ä–µ–∑ rag_stub

---

## üì° 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Artemis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å Artemis:

üëâ **http://localhost:8161**

**–õ–æ–≥–∏–Ω:** `artemis`  
**–ü–∞—Ä–æ–ª—å:** `artemis`

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Queues** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:

### –í—Ö–æ–¥—è—â–∏–µ –æ—á–µ—Ä–µ–¥–∏:
- `chat.in`
- `email.in`
- `index.in`

### –ò—Å—Ö–æ–¥—è—â–∏–µ –æ—á–µ—Ä–µ–¥–∏:
- `chat.out`
- `email.out`
- `index.out`

---

## üß™ 4. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ PIPELINE ‚Ññ1 ‚Äî Chat –ø–æ—Ç–æ–∫

### 4.1. –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python test_pipeline.py chat
```

### 4.2. –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ HTTP API

–û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å –≤ translator_service:

```bash
curl -X POST http://localhost:8005/ingest \
  -H "Content-Type: application/json" \
  -d '{
    "source_queue": "chat.in",
    "body": "[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]"
  }'
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python:

```python
import requests
import json

vector = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]
payload = {
    "source_queue": "chat.in",
    "body": json.dumps(vector)
}
response = requests.post("http://localhost:8005/ingest", json=payload)
print(response.json())
```

### 4.3. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π pipeline)

1. ‚úÖ `translator_service` –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. ‚úÖ –ö–ª–∞–¥—ë—Ç –≤–µ–∫—Ç–æ—Ä –≤ Redis –æ—á–µ—Ä–µ–¥—å `chats`
3. ‚úÖ `rag_stub` —á–∏—Ç–∞–µ—Ç –∏–∑ Redis
4. ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç KNN-–ø–æ–∏—Å–∫ –≤ OpenSearch
5. ‚úÖ –§–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —Å –Ω–∞–π–¥–µ–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º
6. ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –≤ Artemis –æ—á–µ—Ä–µ–¥—å `chat.out`

### 4.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
docker compose logs --tail=30 rag_stub
```

–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
- `–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ Redis 'chats'`
- `–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ KNN-–ø–æ–∏—Å–∫–∞ –ø–æ –≤–µ–∫—Ç–æ—Ä—É`
- `–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –≤ Artemis –æ—á–µ—Ä–µ–¥—å chat.out`

---

## üß™ 5. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ PIPELINE ‚Ññ2 ‚Äî Email –ø–æ—Ç–æ–∫

### 5.1. –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python test_pipeline.py email
```

### 5.2. –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ HTTP API

```bash
curl -X POST http://localhost:8005/ingest \
  -H "Content-Type: application/json" \
  -d '{
    "source_queue": "email.in",
    "body": "[0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 0.1]"
  }'
```

### 5.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```bash
docker compose logs --tail=20 rag_stub
```

–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
- `–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ Redis 'email'`
- `–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞ –≤ Artemis –æ—á–µ—Ä–µ–¥—å email.out`

---

## üß™ 6. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ PIPELINE ‚Ññ3 ‚Äî INDEX –ø–æ—Ç–æ–∫

### 6.1. –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python test_pipeline.py index
```

### 6.2. –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ HTTP API

```bash
curl -X POST http://localhost:8001/index
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Python:

```python
import requests
response = requests.post("http://localhost:8001/index")
print(response.json())  # {"status": "accepted"}
```

### 6.3. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π pipeline)

1. ‚úÖ `indexer_stub` –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é
2. ‚úÖ –°–æ–∑–¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å `docs` –≤ OpenSearch (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
3. ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏–∑ `file_service`
4. ‚úÖ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:
   - –°–∫–∞—á–∏–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
   - –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏ (–ø–æ 50 —Å–∏–º–≤–æ–ª–æ–≤)
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ OpenSearch
5. ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Artemis –æ—á–µ—Ä–µ–¥—å `index.out`

### 6.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
docker compose logs --tail=40 indexer_stub
```

–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
- `–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ docs –≤ OpenSearch...`
- `–ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏: 2`
- `–ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ X —á–∞–Ω–∫–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ ...`
- `–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –í—Å–µ–≥–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —á–∞–Ω–∫–æ–≤: X`

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ OpenSearch:

```bash
curl "http://localhost:9200/docs/_search?pretty=true"
```

–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

üëâ **http://localhost:9200/docs/_search?pretty=true**

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```json
{
  "hits": {
    "total": {
      "value": 2
    },
    "hits": [
      {
        "_source": {
          "doc_id": "a.txt",
          "chunk_id": 0,
          "content": "...",
          "vector": [...]
        }
      }
    ]
  }
}
```

---

## üîç 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ OpenSearch

### 7.1. –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```bash
curl "http://localhost:9200/docs/_search?pretty=true"
```

–ò–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:9200/docs/_search?pretty=true**

### 7.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞

```bash
curl "http://localhost:9200/docs/_mapping?pretty=true"
```

### 7.3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–∞

```bash
curl "http://localhost:9200/docs/_stats?pretty=true"
```

---

## üìú 8. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤

### –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
docker compose logs -f
```

### –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
# rag_stub - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–∫—Ç–æ—Ä–æ–≤ –∏ –ø–æ–∏—Å–∫
docker compose logs -f rag_stub

# translator_service - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
docker compose logs -f translator_service

# indexer_stub - –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
docker compose logs -f indexer_stub

# artemis_indexer - —Å–ª—É—à–∞—Ç–µ–ª—å –æ—á–µ—Ä–µ–¥–∏ index.in
docker compose logs -f artemis_indexer

# artemis_chat_email - —Å–ª—É—à–∞—Ç–µ–ª—å –æ—á–µ—Ä–µ–¥–µ–π chat.in –∏ email.in
docker compose logs -f artemis_chat_email

# file_service - —Å–µ—Ä–≤–∏—Å —Ñ–∞–π–ª–æ–≤
docker compose logs -f file_service
```

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤

```bash
docker compose logs --tail=50 rag_stub
```

---

## üêõ 9. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### 9.1. –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker compose ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs <service_name>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
docker compose restart <service_name>
```

### 9.2. –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–æ –≤—Å–µ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –µ—Å—Ç—å —Ñ–∞–π–ª `__init__.py`:

```bash
ls */__init__.py
```

### 9.3. OpenSearch –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl http://localhost:9200

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs opensearch
```

### 9.4. Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
docker compose exec redis redis-cli ping
```

### 9.5. Artemis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs artemis

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å
# http://localhost:8161
```

---

## üßπ 10. –û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker compose down
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–º–æ–≤

```bash
docker compose down -v
```

### –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Ç–æ–º–∞, –æ–±—Ä–∞–∑—ã)

```bash
docker compose down -v --rmi all
```

---

## üìä 11. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ pipeline

### CHAT/EMAIL Pipeline

```
Artemis (chat.in/email.in)
    ‚Üì
artemis_chat_email
    ‚Üì
translator_service ‚Üí Redis (chats/email)
    ‚Üì
rag_stub (worker.py)
    ‚Üì
rag_stub (tasks.py) ‚Üí OpenSearch (KNN –ø–æ–∏—Å–∫)
    ‚Üì
Artemis (chat.out/email.out)
```

### INDEX Pipeline

```
Artemis (index.in)
    ‚Üì
artemis_indexer
    ‚Üì
indexer_stub (/index)
    ‚Üì
file_service ‚Üí —Ñ–∞–π–ª—ã
    ‚Üì
indexer_stub ‚Üí OpenSearch (–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è)
    ‚Üì
Artemis (index.out)
```

---

## ‚úÖ 12. –ß–µ–∫–ª–∏—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

- [ ] –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã (`docker compose ps`)
- [ ] INDEX pipeline: –∏–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞–Ω, —Ñ–∞–π–ª—ã –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã
- [ ] CHAT pipeline: –ø–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω, –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
- [ ] EMAIL pipeline: –ø–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω, –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
- [ ] –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [ ] OpenSearch —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl/–±—Ä–∞—É–∑–µ—Ä)

---

## üí° 13. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker compose ps
```

### –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

```bash
docker compose build <service_name>
docker compose up -d <service_name>
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
docker stats
```

### –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
docker compose exec <service_name> /bin/bash
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–í–µ–∫—Ç–æ—Ä—ã**: –í—Å–µ –≤–µ–∫—Ç–æ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å JSON-–º–∞—Å—Å–∏–≤–∞–º–∏ –∏–∑ 10 —á–∏—Å–µ–ª (VECTOR_DIM=10)
- **–ß–∞–Ω–∫–∏**: –§–∞–π–ª—ã —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ —á–∞–Ω–∫–∏ –ø–æ 50 —Å–∏–º–≤–æ–ª–æ–≤ (CHUNK_SIZE=50)
- **–ò–Ω–¥–µ–∫—Å**: –ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –≤ OpenSearch - `docs` (INDEX_NAME=docs)
- **–ü–æ—Ä—Ç—ã**: 
  - translator_service: 8005
  - indexer_stub: 8001
  - file_service: 9001
  - opensearch: 9200
  - artemis web: 8161
  - artemis amqp: 61616
  - redis: 6379
